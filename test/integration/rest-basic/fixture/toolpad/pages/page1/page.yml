apiVersion: v1
kind: page
spec:
  id: cn1tds0
  title: Page 1
  content:
    - component: Text
      name: text2Renamed
      layout:
        columnSize: 1
      props:
        variant: h1
        value: RUN yarn test:rest:start
    - component: Text
      name: typographyRenamed
      layout:
        columnSize: 1
      props:
        value:
          $$jsExpression: |
            `query1: ${query1.data.args.query1_param1}`
    - component: Button
      name: button2RenamedIsCool
      layout:
        columnSize: 1
      props:
        content: fetch query2
        onClick:
          $$jsExpressionAction: "query2.fetch({value: 'query2_value' })"
    - component: Text
      name: typography1Renamed
      layout:
        columnSize: 1
      props:
        value:
          $$jsExpression: |
            `query2: ${query2.data?.json.value}`
    - component: Text
      name: text
      layout:
        columnSize: 1
      props:
        value:
          $$jsExpression: |
            queryWithTransform.data
    - component: Text
      name: text1
      layout:
        columnSize: 1
      props:
        value:
          $$jsExpression: |
            `query4 authorization: ${queryWithEnv?.data.headers.Authorization}`
    - component: DataGrid
      name: dataGridRenamed
  queries:
    - name: query2
      query:
        kind: rest
        url: http://localhost:8080/post
        searchParams: []
        headers: []
        method: POST
        body:
          kind: raw
          content:
            $$jsExpression: |
              JSON.stringify(parameters)
          contentType: application/json
      parameters:
        - name: value
          value: ramesh
      mode: mutation
    - name: queryWithTransform
      query:
        kind: rest
        url: http://localhost:8080/get
        headers: []
        method: GET
        searchParams: []
        transform: 'return `query3: Transformed ${data?.url}`'
        transformEnabled: true
    - name: queryWithEnv
      query:
        kind: rest
        url: http://localhost:8081/get
        searchParams: []
        headers: [{ name: Authorization, value: { $$env: TEST_VAR } }]
        method: GET
    - name: customers
      mode: query
      query:
        kind: rest
        headers: []
        method: GET
        url: https://635aaf68aa7c3f113daceeef.mockapi.io/customers
        searchParams: []
